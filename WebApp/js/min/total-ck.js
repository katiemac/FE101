function DropDown(t){this.dd=t,this.initEvents()}function addTextCnv(t,e,n,i,a,r){if(e){for(var s=e.split(" "),o=s.length,c="",d=0;o>d;d++){var l=c+s[d]+" ",u=t.measureText(l),v=u.width;v>a&&d>0?(t.fillText(c,n,i),c=s[d]+" ",i+=r):c=l}t.rect(20,20,150,100),t.fillStyle="#333333",t.font="30px Tiempos",t.fillText(c,n,i)}}function clearCanvas(t){var e=t.getContext("2d");e.beginPath(),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),e.restore()}function update(){clearCanvas(cnv1);var t=document.getElementById("canvas").getContext("2d");t.drawImage(document.getElementById("preset-example"),0,0,600,600),addTextCnv(ctx1,this.value,x_pos,y_pos,maxWidth,lineHeight)}DropDown.prototype={initEvents:function(){var t=this;t.dd.on("click",function(t){$(this).toggleClass("active"),t.stopPropagation()})}},$(function(){var t=new DropDown($(".dd"));$(document).click(function(){$(t).removeClass("active")})}),Caman.Filter.register("blackAndWhite",function(t){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),Caman.Filter.register("bright",function(t){return this.brightness(7),this.exposure(5),this.contrast(16),this.vibrance(7)}),function(){var t,e,n,i,e=null;t=!1,i=function(n){var i,a;if(!t)return $("#PresetFilters a").removeClass("Active"),i=$("#PresetFilters a[data-preset='"+n+"']"),a=i.html(),i.addClass("Active").html("Rendering..."),t=!0,e.revert(!1),e[n](),e.render(function(){return i.html(a),t=!1})},$(document).ready(function(){return e=Caman("#preset-example"),$(" #done ").click(function(){var t=document.getElementById("canvas").getContext("2d");t.drawImage(document.getElementById("preset-example"),0,0,600,600),$("#imageEdit").hide()}),$("#PresetFilters").on("click","a",function(){return i($(this).data("preset"))})})}.call(this);var cnv1=document.getElementById("canvas"),ctx1=cnv1.getContext("2d"),maxWidth=cnv1.width-400,lineHeight=40,x_pos=15,y_pos=40;update(),document.getElementById("text_cnv").onkeyup=update;