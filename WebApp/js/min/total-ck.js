function DropDown(t){this.dd=t,this.initEvents()}function addTextCnv(t,e,n,i,r,a){if(e){for(var s=e.split(" "),o=s.length,c="",d=0;o>d;d++){var l=c+s[d]+" ",u=t.measureText(l),h=u.width;h>r&&d>0?(t.fillText(c,n,i),c=s[d]+" ",i+=a):c=l}t.fillStyle="#2ac498",t.font="bold 17px sans-serif",t.fillText(c,n,i)}}function update(){addTextCnv(ctx1,this.value,x_pos,y_pos,maxWidth,lineHeight)}DropDown.prototype={initEvents:function(){var t=this;t.dd.on("click",function(t){$(this).toggleClass("active"),t.stopPropagation()})}},$(function(){var t=new DropDown($(".dd"));$(document).click(function(){$(t).removeClass("active")})}),Caman.Filter.register("blackAndWhite",function(t){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),Caman.Filter.register("bright",function(t){return this.brightness(7),this.exposure(5),this.contrast(16),this.vibrance(7)}),function(){var t,e,n,i,e=null;t=!1,i=function(n){var i,r;if(!t)return $("#PresetFilters a").removeClass("Active"),i=$("#PresetFilters a[data-preset='"+n+"']"),r=i.html(),i.addClass("Active").html("Rendering..."),t=!0,e.revert(!1),e[n](),e.render(function(){return i.html(r),t=!1})},$(document).ready(function(){return e=Caman("#preset-example"),$(" #done ").click(function(){var t=document.getElementById("canvas").getContext("2d");t.drawImage(document.getElementById("preset-example"),0,0),$("#imageEdit").hide()}),$("#PresetFilters").on("click","a",function(){return i($(this).data("preset"))})})}.call(this);var cnv1=document.getElementById("canvas"),ctx1=cnv1.getContext("2d"),maxWidth=cnv1.width-10,lineHeight=23,x_pos=(cnv1.width-maxWidth)/2,y_pos=15;update(),document.getElementById("text_cnv").onkeyup=update;